<div class="container mt-4">
    <div class="card p-4">
        <h2 class="text-2xl font-bold mb-4">{{ factureId != 'null' ? 'Edit' : 'Create' }} Bill</h2>
        <form [formGroup]="factureForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="field">
                <label for="patient" class="block text-sm font-medium mb-2">Patient</label>
                <p-dropdown 
                    id="patient"
                    [options]="patients" 
                    formControlName="patientId"
                    placeholder="Select a patient"
                    [style]="{'width':'100%'}"
                    optionLabel="label"
                    optionValue="value"
                ></p-dropdown>
            </div>

            <div class="field">
                <label for="date" class="block text-sm font-medium mb-2">Date</label>
                <p-calendar 
                    id="date"
                    formControlName="date"
                    [showIcon]="true"
                    dateFormat="dd/mm/yy"
                    [style]="{'width':'100%'}"
                ></p-calendar>
            </div>

            <div class="field">
                <label for="description" class="block text-sm font-medium mb-2">Description</label>
                <input 
                    id="description"
                    type="text" 
                    pInputText 
                    formControlName="description"
                    class="w-full"
                />
            </div>

            <div class="field">
                <label for="invoice" class="block text-sm font-medium mb-2">Invoice Number</label>
                <input 
                    id="invoice"
                    type="text" 
                    pInputText 
                    formControlName="invoice"
                    class="w-full"
                />
            </div>

            <div class="field">
                <label for="price" class="block text-sm font-medium mb-2">Price</label>
                <p-inputNumber 
                    id="price"
                    formControlName="price"
                    mode="currency" 
                    currency="USD"
                    locale="en-US"
                    [style]="{'width':'100%'}"
                ></p-inputNumber>
            </div>

            <div class="field">
                <label for="qty" class="block text-sm font-medium mb-2">Quantity</label>
                <p-inputNumber 
                    id="qty"
                    formControlName="qty"
                    [showButtons]="true"
                    [min]="1"
                    [style]="{'width':'100%'}"
                ></p-inputNumber>
            </div>

            <div class="field">
                <label for="paymentMethod" class="block text-sm font-medium mb-2">Payment Method</label>
                <p-dropdown 
                    id="paymentMethod"
                    [options]="paymentMethods" 
                    formControlName="paymentMethod"
                    placeholder="Select payment method"
                    [style]="{'width':'100%'}"
                ></p-dropdown>
            </div>

            <div class="field">
                <label for="status" class="block text-sm font-medium mb-2">Status</label>
                <p-selectButton 
                    id="status"
                    [options]="statusOptions" 
                    formControlName="status"
                    optionLabel="label"
                    optionValue="value"
                ></p-selectButton>
            </div>

            <div class="field">
                <label class="block text-sm font-medium mb-2">Subtotal</label>
                <p-inputNumber 
                    [readonly]="true"
                    formControlName="subTotal"
                    mode="currency" 
                    currency="USD"
                    locale="en-US"
                    [style]="{'width':'100%'}"
                ></p-inputNumber>
            </div>

            <div class="field">
                <label class="block text-sm font-medium mb-2">Tax (20%)</label>
                <p-inputNumber 
                    [readonly]="true"
                    formControlName="tax"
                    mode="currency" 
                    currency="USD"
                    locale="en-US"
                    [style]="{'width':'100%'}"
                ></p-inputNumber>
            </div>

            <div class="field col-span-2">
                <label class="block text-sm font-medium mb-2">Total</label>
                <p-inputNumber 
                    [readonly]="true"
                    formControlName="total"
                    mode="currency" 
                    currency="USD"
                    locale="en-US"
                    [style]="{'width':'100%'}"
                ></p-inputNumber>
            </div>

            <div class="col-span-2 flex justify-end gap-2 mt-4">
                <p-button 
                    label="Cancel" 
                    severity="secondary" 
                    [routerLink]="['/backoffice/facture']"
                ></p-button>
                <p-button 
                    label="Save" 
                    (onClick)="onSubmit()" 
                    [disabled]="factureForm.invalid"
                ></p-button>
            </div>
        </form>
    </div>
</div>